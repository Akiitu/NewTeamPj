<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="icon" href="">
<title>Document</title>
</head>
<body>
	<form name="myform">
		<input type="text" name="text">
		<!-- <input type="button" id="sample" value="送信"> -->
		<button name="btn">送信</button>
	</form>
	<ul id="message"></ul>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
	<script>
		//var sock = new WebSocket('wss://html5rocks.websocket.org/echo');
		/* var sock = new WebSocket('wss://akiitu.github.io/NewTeamPj/test/index.html');

		//接続
		sock.addEventListener('open', function(e) {
			console.log('Socket 接続成功');
		});

		//サーバーからデータを受け取る
		sock.addEventListener('message', function(e) {
			console.log(e.data);
		});

		document.addEventListener('DOMContentLoaded', function(e) {
			//サーバーにデータを送る
			document.getElementById('sample').addEventListener('click',
					function(e) {

						var text = document.getElementById('inputText');

						sock.send(text.value);
					});
		}); */
		var socket = io();
		var form = document.forms.myform;

		form.btn.addEventListener('click', function(e) {
			e.preventDefault();

			socket.emit('chat', form.text.value);
			form.text.value = '';
		});

		socket.on('chat', function(msg)){
			var li = document.createElement('li');

			li.textContent = msg;
			message.appendChild(li);
		});

	</script>
</body>
</html>